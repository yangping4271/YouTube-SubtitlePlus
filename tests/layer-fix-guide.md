# 字幕层级修复指南

## 问题分析
字幕显示在YouTube进度条上方，遮挡了用户界面控件。

## 修复步骤

### 1. 重新加载扩展
1. 打开 `chrome://extensions/`
2. 找到 "YouTube本地字幕显示器" 扩展
3. 点击 🔄 重新加载按钮

### 2. 刷新YouTube页面
刷新任意YouTube视频页面以加载新的代码

### 3. 测试方法A：使用内置测试函数
在YouTube页面开发者控制台运行：
```javascript
testSubtitlePositioning()
```

### 4. 测试方法B：使用独立验证脚本
如果方法A不工作，直接复制运行 `tests/verify-layer-fix.js` 中的代码

### 5. 测试方法C：手动验证
1. 在扩展popup中上传字幕文件
2. 开启字幕显示
3. 检查字幕是否显示在进度条下方

## 技术细节

### 修复前的问题
```css
z-index: 2147483647 !important; /* 过高，遮挡所有控件 */
```

### 修复后的设置
```css
z-index: 50 !important; /* 合理层级，在控件下方 */
```

## 预期效果
- ✅ 字幕显示在进度条下方
- ✅ 不遮挡YouTube控制按钮
- ✅ 保持字幕可见性
- ✅ 维持良好用户体验

## 如果问题仍然存在
1. 确认扩展已重新加载
2. 确认页面已刷新
3. 检查浏览器控制台是否有错误信息
4. 尝试不同的YouTube视频页面

## 层级参考
- 视频内容: z-index 1-10
- **字幕层**: z-index 50 ⭐
- YouTube控件: z-index 60-100
- 弹出菜单: z-index 1000+